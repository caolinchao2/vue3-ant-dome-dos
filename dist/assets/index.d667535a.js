import{d as a,t as e,D as t,E as o,o as r,h as n,l,B as s,u as d,_ as i,g as m,i as f,b as p,w as u,F as c,A as v,c as y,v as D,G as w,H as _,I as M,J as b,K as g,r as k,j as h,L as x,y as U,f as O,M as $,e as I,p as j,N as A,O as C,P as F,Q as q}from"./index.96025fc1.js";import{F as S,g as L,i as R,m as N,a as E,b as H}from"./assign.01f1c7c4.js";var P=i(a({__name:"SlotOut",props:{field:{type:Object,required:!0}},setup(a){const i=a,{field:m}=e(i),f=t();return o("field",m),(a,e)=>(r(),n("div",null,[l(a.$slots,`${d(m).key}`,s(d(f),{field:d(m)}))]))}}),[["__file","D:/我的文件/vue3-ant-dome-dos/vue3-ant-dome-dos/src/common/components/SpaceUI/SForm/SlotOut.vue"]]);var B=i(a({__name:"SFormLayout",props:{modelData:{type:Object,required:!0},fieldListMap:{type:Array,required:!0},formDataMap:{type:[Object,null],required:!0},formData:{type:Object,required:!0},rowMsg:{type:Object,required:!0},name:{type:Array,required:!0}},setup(a){const o=t(),i=a,{modelData:g,formDataMap:k,formData:h,fieldListMap:x}=e(i),U=m((()=>k.value)),O=m((()=>h.value)),$=m((()=>L(x).filter((a=>!1!==L(a?.checked)))));return(a,e)=>{const t=f("a-col"),i=f("a-row");return r(),n("div",null,[p(i,M(b(d(g)?.rowAttr)),{default:u((()=>[(r(!0),n(c,null,v(d($),((e,i)=>(r(),y(t,{key:e.key+i,span:e?.span||e?.colAttr?.span,style:_({display:i<(d(g).expandNum||d($).length)?"block":"none",...d(g)?.colAttr?.style})},{default:u((()=>[e.type?(r(),n(c,{key:0},[D(' <a-row class="hint" style="width: 100%">\r\n            <a-col\r\n              v-if="field?.hint"\r\n              v-bind="field.formItemAttr?.labelCol || {}"\r\n              :style="{\r\n                display: \'flex\',\r\n                alignItems: \'center\',\r\n                justifyContent: \'flex-end\',\r\n              }"\r\n            >\r\n              <Hint\r\n                :title="field?.hint?.title"\r\n                :content="\r\n                  typeof field.hint === \'string\'\r\n                    ? field.hint\r\n                    : field.hint.content\r\n                "\r\n              ></Hint\r\n              >&nbsp;&nbsp;&nbsp;&nbsp;\r\n            </a-col>\r\n          </a-row> '),!e.type||"slot"!==e.type&&"slotOut"!==e.type?D("v-if",!0):(r(),y(P,{key:0,name:`${e.key}`,field:e,mapData:d(U),data:d(O)},w({_:2},[v(a.$slots,((e,t)=>({name:t,fn:u((e=>[l(a.$slots,t,s({ref_for:!0},e),void 0,!0)]))})))]),1032,["name","field","mapData","data"])),e.isForm?(r(),y(S,s({key:1,ref_for:!0,ref:"formItemRef"},{...d(o),...d(o)?.["onUpdate:formDataMap"]?{"onUpdate:mapData"(a){d(o)?.["onUpdate:formDataMap"]({...d(k),...a})}}:{},...d(o)?.["onUpdate:formData"]?{"onUpdate:rowData"(a){d(o)?.["onUpdate:formData"]({...d(h),...a})}}:{}},{field:e,fieldIndex:i,modelData:d(g),mapData:d(U),rowData:d(O),formData:d(O),isCore:Boolean(d(U)),rowMsg:a.rowMsg,name:[...a.name]}),w({itemIn:u((t=>[e.type&&"slot"===e.type?l(a.$slots,`${e.key}In`,{key:0,data:t.data,mapData:d(U),model:d(g),field:t.field},void 0,!0):D("v-if",!0)])),itemSlot:u((t=>["slot"===e?.config?.$type||"slot"===e?.config?.type?l(a.$slots,`${e.key}${e?.config?.key}In`,{key:0,data:t.data,model:d(g),field:t.field,mapData:d(U)},void 0,!0):D("v-if",!0)])),_:2},[v(a.$slots,((e,t)=>({name:t,fn:u((e=>[l(a.$slots,t,s({ref_for:!0},e),void 0,!0)]))})))]),1040,["field","fieldIndex","modelData","mapData","rowData","formData","isCore","rowMsg","name"])):D("v-if",!0)],64)):D("v-if",!0)])),_:2},1032,["span","style"])))),128))])),_:3},16),p(i,null,{default:u((()=>[l(a.$slots,"formRow",{data:d(U)},void 0,!0)])),_:3})])}}}),[["__scopeId","data-v-19515894"],["__file","D:/我的文件/vue3-ant-dome-dos/vue3-ant-dome-dos/src/common/components/SpaceUI/SForm/SFormLayout.vue"]]);const V={class:"app-container"},z={id:"components-form-demo-advanced-search"};var G=i(a({__name:"index",props:{formModel:{type:Object,required:!1,default:()=>({})},fieldList:{type:Array,required:!0,default:()=>[]},formData:{type:Object,required:!0,default:()=>({})},extra:{type:null,required:!1},name:{type:Array,required:!1}},setup(a,{expose:o}){const i=t(),c=g(),D=a,{formModel:_,fieldList:M,formData:b,name:S}=e(D),L=k(),P=k(),G=k({}),J=k([]),K=h({isForm:!0,formAttr:{labelCol:{span:8},wrapperCol:{span:24},labelWrap:!0,class:"ant-advanced-search-form",style:{},model:G.value},rowAttr:{gutter:[24,0]},colAttr:{span:8,style:{}},follow:!0,expandNum:void 0,formItemAttr:{labelCol:{span:6,offset:0}},config:{"auto-size":{minRows:1,maxRows:5},trim:!0,isShowFindCodeName:!0,isForm:!0,isCore:!0,disabled:!1,placeholder:"请填选","allow-clear":!0,maxlength:200,"max-tag-count":"responsive"}}),Q=m((()=>S?.value));R(K,["disabled"]),x((()=>{Object.prototype.hasOwnProperty.call(_.value,"async")&&N(_.value,_.value.async)}));const W=k({});function T(){const a=!1!==W.value?.follow;return G.value=a?b.value:C(b.value),{formDataMap:G.value,formData:b.value}}function X(){aa(),G.value=null}function Y(){return Object.assign(b.value,G.value),X(),b.value}function Z(a,e){if(!1!==d(_.value.isForm))return new Promise((t=>{L.value.validate("array"===F(a)||"string"===F(a)?a:void 0).then((o=>{t({status:!0,data:{...o}}),"function"===F(a)&&a({status:!0,data:{...o}}),e&&e({status:!0,data:{...o}})})).catch((a=>{t({status:!1,data:{...a}}),e&&e({status:!1,data:{...a}})}))}))}function aa(a){L.value?.clearValidate(a)}U((()=>{R(_.value,["disabled","span","rules"]),W.value=E({},A(K),A(_.value)),J.value=M.value.map((a=>H(a,W.value)))})),O((()=>[W.value.isForm,b.value]),(([a])=>{!0===a?T():X()}),{immediate:!0,deep:!0});const ea=h({options:{},unit:{}}),ta=k({confirm:Y,update:T,cancel:X}),oa={clearValidate:aa,getData:function(){return C(G.value)},validate:Z,findCodeItem:function(a,e){return P.value.findCodeItem(a,e)},update:T,cancel:X,confirm:Y,formRef:L,mapData:G},ra=h({});return x((()=>{if(L.value){Object.keys(L.value).forEach((a=>{ra[a]=L.value[a]}))}Object.keys(oa).forEach((a=>{ra[a]=oa[a]}))})),o(ra),(a,e)=>{const t=f("a-button"),o=f("a-form");return r(),n("div",V,[$(I("div",null,[p(t,{onClick:e[0]||(e[0]=a=>Z())},{default:u((()=>[j("校验测试")])),_:1}),p(t,{onClick:e[1]||(e[1]=a=>aa())},{default:u((()=>[j("清除校验测试")])),_:1})],512),[[q,!1]]),I("div",z,[d(Q)?(r(),y(B,s({key:1},{...d(i),...d(i)?.["onUpdate:formData"]?{"onUpdate:formData"(a){d(i)?.["onUpdate:formData"]({...d(b),...a})},"onUpdate:formDataMap"(a){d(i)?.["onUpdate:formData"]({...d(b),...a})}}:{}},{modelData:d(W),formData:d(b),formDataMap:d(G),fieldListMap:d(J),rowMsg:d(ea),name:d(S)?d(S):[]}),w({_:2},[v(d(c),((e,t)=>({name:t,fn:u((e=>[l(a.$slots,t,s({way:d(ta),extra:a.extra},{...e},{model:d(W)}))]))})))]),1040,["modelData","formData","formDataMap","fieldListMap","rowMsg","name"])):(r(),y(o,s({key:0,ref_key:"formRef",ref:L},{...d(i),...d(W).formAttr,...d(i).formAttr},{model:d(G)}),{default:u((()=>[p(B,s({...d(i),...d(i)?.["onUpdate:formData"]?{"onUpdate:formData"(a){d(i)?.["onUpdate:formData"]({...d(b),...a})},"onUpdate:formDataMap"(a){d(i)?.["onUpdate:formData"]({...d(b),...a})}}:{}},{modelData:d(W),formData:d(b),formDataMap:d(G),fieldListMap:d(J),rowMsg:d(ea),name:d(S)?d(S):[]}),w({_:2},[v(d(c),((e,t)=>({name:t,fn:u((e=>[l(a.$slots,t,s({way:d(ta),extra:a.extra},e,{model:d(W)}))]))})))]),1040,["modelData","formData","formDataMap","fieldListMap","rowMsg","name"])])),_:3},16,["model"])),l(a.$slots,"formOut",{data:d(G),model:d(_)})])])}}}),[["__file","D:/我的文件/vue3-ant-dome-dos/vue3-ant-dome-dos/src/common/components/SpaceUI/SForm/index.vue"]]);export{G as _};
